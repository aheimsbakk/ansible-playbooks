---
all:
  hosts:
    localhost:
      ansible_connection: local
      libvirt_provision_root_password: root
      libvirt_provision_temp_path: '{{ lookup("env", "HOME") + "/tmp" }}'
      libvirt_provision_virtual_machine_config:
        memory_mb: 8000
        disk_gb: 20
        vcpus: 2
        distro: trixie
      libvirt_provision_virtual_machines:
        - name: k3s-cp1
          net_config:
            ethernets:
              enp1s0:
                addresses:
                  - 192.168.122.11/24
        # - name: k3s-n1
        #   net_config:
        #     ethernets:
        #       enp1s0:
        #         addresses:
        #           - 192.168.122.21/24
        # - name: k3s-n2
        #   net_config:
        #     ethernets:
        #       enp1s0:
        #         addresses:
        #           - 192.168.122.22/24

k3s:
  children:
    k3s_cp:
      hosts:
        k3s-cp1:
          ansible_host: 192.168.122.11
          k3s_node_ip: 192.168.122.11
    # k3s_node:
    #   hosts:
    #     k3s-n1:
    #       ansible_host: 192.168.122.21
    #       k3s_node_ip: 192.168.122.21
    #     k3s-n2:
    #       ansible_host: 192.168.122.22
    #       k3s_node_ip: 192.168.122.22
  vars:
    ansible_user: root
    env: dev
